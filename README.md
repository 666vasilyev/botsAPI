# BotsAPI Microservice

Микросервис "botsAPI" представляет собой API для управления ботами в Telegram. Он разработан на языке Python и предоставляет следующий функционал:

## Основные возможности

- Создание нового бота в базе данных
- Проверка прав администратора для бота
- Периодический сбор статистики по каналам
- Привязка канала к боту с использованием активных ботов для равномерного распределения
- Пост в канал с использованием синтаксиса Markdown

## Используемые технологии

- FastAPI
- Celery
- Redis
- PostgreSQL
- SQLAlchemy Async
- Aiogram
- Docker Compose
- Nginx
- Basic Auth

## Установка и запуск

1. Установите Docker и Docker Compose.
2. Склонируйте репозиторий с микросервисом.
3. Создайте файл `.env` в корневой папке проекта и заполните необходимые переменные окружения.
4. Соберите микросервис с помощью команды `docker compose build`, затем `docker build -t app .`.
5. Запустите `docker compose up`
5. Микросервис будет доступен по адресу `http://localhost:8000`.

## API

### Создание нового бота

- Метод: POST
- Путь: `/bots/`

### Удаление бота

- Метод: DELETE
- Путь: `/bots/{id}`

### Изменение бота

- Метод: PATCH
- Путь: `/bots/{id}`

### Получение информации по боту из базы

- Метод: GET
- Путь: `/bots/{id}`

### Получение табличных данных по всем ботам

- Метод: GET
- Путь: `/bots/`

### Привязка канала к боту (без указания id бота)

- Метод: POST
- Путь: `/channels/`

### Отвязать канал (деактивировать привязку)

- Метод: DELETE
- Путь: `/channels/{id}`

### Привязка канала к боту (с указанием id бота)

- Метод: POST
- Путь: `/channels/`

### Получение инфы по каналу из базы

- Метод: GET
- Путь: `/channels/{tg_id}`

### Получение списка всех каналов

- Метод: GET
- Путь: `/channels/`

### Пост в канал

- Метод: POST
- Путь: `/messages`

### Получение результата по задаче

- Метод: GET
- Путь: `/tasks/{id}`

